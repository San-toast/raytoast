<!DOCTYPE html>
<html lang="en">
  <%- include('../templates/header')-%>
  <body>
    <div class="nav">
  <a href="../../"><p class="nav-header">Tixxly</p></a>
  <div class="nav-icons">
    <a href="../../">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 576 512"
        class="ticket-icon"
      >
        <!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
        <path
          d="M128 160H448V352H128V160zM512 64C547.3 64 576 92.65 576 128V208C549.5 208 528 229.5 528 256C528 282.5 549.5 304 576 304V384C576 419.3 547.3 448 512 448H64C28.65 448 0 419.3 0 384V304C26.51 304 48 282.5 48 256C48 229.5 26.51 208 0 208V128C0 92.65 28.65 64 64 64H512zM96 352C96 369.7 110.3 384 128 384H448C465.7 384 480 369.7 480 352V160C480 142.3 465.7 128 448 128H128C110.3 128 96 142.3 96 160V352z"
        />
      </svg>
      </a>
  </div>
</div>
    <div class="concessions-container">
    <h1>Concessions</h1>
        <% for(var i=0; i<concessions.length; i++) {%>
        <button class="concession-button">
       <%= concessions[i].dataValues.Name + " " + concessions[i].dataValues.Size%>
        </button>
<% } %>
</div>
<div class="order-container">
  <h1>Order</h1>

</div>
<a href="#" class="finish-button">This will be a -></a>
  </body>
  <script> 
  let orders = [];
  let concessionButtons = document.querySelectorAll(".concession-button");
  for (i=0; i<concessionButtons.length; i++) {
    concessionButtons[i].addEventListener ("click", (e) =>{
      let orderText = e.srcElement.innerText;
      orders.push(orderText);
      let orderContainer = document.querySelector(".order-container");
      let newOrder = document.createElement("div");
      let newOrderText = document.createElement("p");
      let deleteButton = document.createElement("button");
      deleteButton.className = "delete-button";
      deleteButton.innerText = "X";
      newOrder.className = "order-item";
      newOrderText.innerText= orderText;
      newOrder.append(newOrderText,deleteButton)
      orderContainer.append(newOrder);

})}

let finishButton = document.querySelector(".finish-button");
let pathName = window.location.pathname;
pathName = pathName.replace('/concessions', '');
pathArray = pathName.split("/");
pathArray.shift();
console.log(pathArray);
finishButton.addEventListener ("click", () => {
  localStorage.setItem("orders", orders);
  localStorage.setItem("showtimeId", pathArray[1]);
  window.location.assign("/contact")
})


  </script>
</html>
